(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{749:function(t,e,n){t.exports=n.p+"img/circleBottom.bb867d4.png"},863:function(t,e,n){"use strict";n.r(e);var r=n(707),o=n(725),c=n(723),l=n(253),m=n(260),d=n(708),v=n(145),h=(n(45),[function(){var t=this._self._c;return t("div",{staticClass:"img-container"},[t("img",{staticClass:"circle-bottom",attrs:{src:n(749),alt:"Circle"}})])}]),f=n(16),x=n(19),w=(n(94),n(46),n(9),n(4),n(55),n(47),n(54),n(58),n(78),n(306)),k=n(738),_=n(790),I=new(n(735))(window.ethereum),C={name:"SwapPage",data:function(){return{chains:void 0,selectedItem1:null,selectedItem2:null,tokenInAmountUser:0,tokenAmountIn:0,tokenAmountOut:0,tokens:void 0,chainFrom:void 0,chainTo:void 0,tokensFrom:void 0,tokensTo:void 0,route:void 0,requestId:void 0,heightChart:void 0,swapFrom:{img:n(171),name:"bear",amount:void 0},swapTo:{img:n(147),name:"btc",amount:void 0},rules:[function(t){return!!t||"Field is required"},function(t){return/^\d+(\.\d+)?$/.test(t)||"Invalid numeric input"},function(t){return t>0||"Value must be positive"}],numericFormatConfig:{decimalSeparator:".",fractionDigitsMax:2,fractionDigitsMin:2,fractionDigitsSeparator:"",thousandsDigitsSeparator:","}}},head:function(){return{title:"Swap"}},computed:{items1Filtered:function(){var t,e=this;return null===(t=this.tokens)||void 0===t?void 0:t.filter((function(t){var n,r;return null!==(n=t.chainId===(null===(r=e.chainFrom)||void 0===r?void 0:r.chainId))&&void 0!==n?n:""}))},items2Filtered:function(){var t,e=this;return null===(t=this.tokens)||void 0===t?void 0:t.filter((function(t){var n,r;return null!==(n=t.chainId===(null===(r=e.chainTo)||void 0===r?void 0:r.chainId))&&void 0!==n?n:""}))},chainsFromFiltered:function(){var t,e=this;return null===(t=this.chains)||void 0===t?void 0:t.filter((function(t){var n;return null!==(n=t!==e.chainTo)&&void 0!==n?n:""}))},chainsToFiltered:function(){var t,e=this;return null===(t=this.chains)||void 0===t?void 0:t.filter((function(t){var n;return null!==(n=t!==e.chainFrom)&&void 0!==n?n:""}))}},mounted:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$metamask.checkConnection();case 2:return e.next=4,t.getSquidInfo();case 4:window.addEventListener("resize",t.styles);case 5:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){window.removeEventListener("resize",this.styles)},methods:{rightChain:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="0x"+Number(t.chainFrom.chainId).toString(16),e.next=3,window.ethereum.request({method:"eth_chainId",params:[]});case 3:if((r=e.sent)===n){e.next=7;break}return e.next=7,t.$metamask.switchToChainBySquidParams(t.chainFrom);case 7:return e.abrupt("return",r===n);case 8:case"end":return e.stop()}}),e)})))()},getSquidInfo:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.$squidAxelar.getChains(t),t.$squidAxelar.getTokens(t)]);case 2:n=e.sent,r=Object(f.a)(n,2),o=r[0],c=r[1],t.chains=o.chains,t.tokens=c.tokens;case 8:case"end":return e.stop()}}),e)})))()},getRoute:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$squidAxelar.getRoute(t,{fromChain:t.chainFrom.chainId,toChain:t.chainTo.chainId,fromToken:t.selectedItem1.address,toToken:t.selectedItem2.address,fromAmount:BigInt(t.tokenAmountIn*Math.pow(10,t.selectedItem1.decimals)).toString().replace(/[.,]/g,""),fromAddress:t.$metamask.userAccount,toAddress:t.$metamask.userAccount,slippageConfig:{autoMode:1}});case 2:return n=e.sent,t.route=n.data.route,t.requestId=n.requestId,console.log("getroute squid"),console.log(n),console.log("------------"),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))()},submitForm:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()){e.next=3;break}return e.next=3,t.swapTokens();case 3:case"end":return e.stop()}}),e)})))()},setMaxValue:function(){this.tokenAmountIn=this.tokenInAmountUser|Object(w.b)(this.numericFormatConfig),this.calculateMidPrice()},switchTokens:function(){var t=this.selectedItem1;this.selectedItem1=this.selectedItem2,this.selectedItem2=t},swapValues:function(){var t=this.$refs.select1.internalValue;this.$refs.select1.internalValue=this.$refs.select2.internalValue,this.$refs.select2.internalValue=t},balanceOf:function(t){var e=this;return Object(x.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.rightChain()){n.next=6;break}return r=new I.eth.Contract(k,t.address),n.next=4,r.methods.balanceOf(e.$metamask.userAccount).call();case 4:o=n.sent,e.tokenInAmountUser=o/Math.pow(10,t.decimals);case 6:case"end":return n.stop()}}),n)})))()},swapTokens:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.rightChain()){e.next=25;break}return n=new _.providers.Web3Provider(window.ethereum),r=n.getSigner(),e.next=5,t.getRoute();case 5:return o=t.route.transactionRequest,console.log(o),c=new _.Contract(o.target,[],r),e.t0=c,e.t1=o.data,e.t2=o.value,e.next=13,n.getGasPrice();case 13:return e.t3=e.sent,e.t4=o.gasLimit,e.t5={value:e.t2,gasPrice:e.t3,gasLimit:e.t4},e.next=18,e.t0.send.call(e.t0,e.t1,e.t5);case 18:return l=e.sent,e.next=21,l.wait();case 21:m=e.sent,console.log(m),e.next=26;break;case 25:t.$alert("cancel","Please switch to"+t.chainFrom.network+"network");case 26:case"end":return e.stop()}}),e)})))()}}},S=(n(766),n(768),n(57)),component=Object(S.a)(C,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"swap"}},[e("section",{staticClass:"fwrap center divcol",attrs:{id:"swap-content"}},[e("h1",{staticClass:"swap-title"},[t._v("Bridge Tokens")]),t._v(" "),e(c.a,{ref:"form"},[e("div",{staticClass:"divrow mobile-column",staticStyle:{gap:"20px"}},[e(o.a,{staticClass:"swap-card divcol center jspace"},[e("span",{staticClass:"dm-400"},[t._v("\n            From\n          ")]),t._v(" "),e("div",{staticClass:"swap-container"},[e(d.a,{staticStyle:{width:"80px"},attrs:{items:t.chainsFromFiltered,rules:[t.rules[0]]},scopedSlots:t._u([{key:"item",fn:function(n){var r=n.item;return[e(m.a,{staticStyle:{"max-width":"20px"},attrs:{src:r.chainIconURI}}),t._v(" "),e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(r.axelarChainName))])]}},{key:"selection",fn:function(n){var r=n.item;return[r?e(m.a,{staticStyle:{"max-width":"20px"},attrs:{src:r.chainIconURI}}):t._e()]}}]),model:{value:t.chainFrom,callback:function(e){t.chainFrom=e},expression:"chainFrom"}}),t._v(" "),e(d.a,{ref:"select1",staticClass:"input-auto",attrs:{"no-data-text":"Please select a blockchain first",items:t.items1Filtered,"item-text":"text","item-value":"value"},scopedSlots:t._u([{key:"item",fn:function(n){var r=n.item;return[e(m.a,{staticStyle:{"max-width":"20px"},attrs:{src:r.logoURI}}),t._v(" "),e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(r.name))])]}},{key:"selection",fn:function(n){var r=n.item;return[r?e(m.a,{staticStyle:{"max-width":"20px"},attrs:{src:r.logoURI}}):t._e(),t._v(" "),r?e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(r.symbol))]):t._e()]}}]),model:{value:t.selectedItem1,callback:function(e){t.selectedItem1=e},expression:"selectedItem1"}}),t._v(" "),e(v.a,{staticClass:"input-number",attrs:{rules:t.rules,value:0,placeholder:"0.00"},model:{value:t.tokenAmountIn,callback:function(e){t.tokenAmountIn=e},expression:"tokenAmountIn"}}),t._v(" "),e(r.a,{staticClass:"btn-max",on:{click:t.setMaxValue}},[t._v("max")])],1),t._v(" "),e("div",{staticClass:"divrow center jspace mobile-btn",staticStyle:{width:"350px"}},[e(l.a,{on:{click:function(e){return t.swapValues()}}},[t._v("mdi-swap-vertical")])],1),t._v(" "),e("span",{staticClass:"dm-400"},[t._v("\n            To\n          ")]),t._v(" "),e("div",{staticClass:"swap-container swap-container2"},[e(d.a,{staticStyle:{width:"80px"},attrs:{items:t.chainsToFiltered,rules:[t.rules[0]]},scopedSlots:t._u([{key:"item",fn:function(n){var r=n.item;return[e(m.a,{staticStyle:{"max-width":"20px"},attrs:{src:r.chainIconURI}}),t._v(" "),e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(r.axelarChainName))])]}},{key:"selection",fn:function(n){var r=n.item;return[r?e(m.a,{staticStyle:{"max-width":"20px"},attrs:{src:r.chainIconURI}}):t._e()]}}]),model:{value:t.chainTo,callback:function(e){t.chainTo=e},expression:"chainTo"}}),t._v(" "),e(d.a,{ref:"select2",staticClass:"input-auto",attrs:{"no-data-text":"Please select a blockchain first",items:t.items2Filtered,"item-text":"text","item-value":"value"},scopedSlots:t._u([{key:"item",fn:function(n){var r=n.item;return[e(m.a,{staticStyle:{"max-width":"20px"},attrs:{src:r.logoURI}}),t._v(" "),e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(r.name))])]}},{key:"selection",fn:function(n){var r=n.item;return[r?e(m.a,{staticStyle:{"max-width":"20px"},attrs:{src:r.logoURI}}):t._e(),t._v(" "),r?e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(r.symbol))]):t._e()]}}]),model:{value:t.selectedItem2,callback:function(e){t.selectedItem2=e},expression:"selectedItem2"}}),t._v(" "),e(v.a,{staticClass:"input-number",attrs:{rules:[t.rules[1]],value:0,placeholder:"0.00",disabled:!0},model:{value:t.tokenAmountOut,callback:function(e){t.tokenAmountOut=e},expression:"tokenAmountOut"}})],1),t._v(" "),e(r.a,{staticClass:"btn mobile-btn",staticStyle:{width:"350px!important",height:"60px!important","margin-top":"15px"},on:{click:t.submitForm}},[t._v("Swap\n          ")])],1),t._v(" "),t._e(),t._v(" "),e(r.a,{staticClass:"showmobile connect-btn bold",on:{click:function(e){!t.isLogged&&t.$store.dispatch("modalConnect")}}},[t.isLogged?[t._v("\n          "+t._s(t.user.accountId)+"\n        ")]:[t._v("Connect wallet")]],2)],1)]),t._v(" "),t._m(0)],1)])}),h,!1,null,null,null);e.default=component.exports;installComponents(component,{AppChartsSwapChart:n(762).default})}}]);